<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>NUVO Metrics Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/css/dashboard-styles.css" />
  </head>
  <body>
    <!-- LOGIN -->
    <div id="login-screen" class="screen">
      <h1>Dashboard Access</h1>
      <input
        type="password"
        id="password-input"
        placeholder="Password"
        autocomplete="off"
      />
      <button id="login-btn">Enter</button>
      <p id="login-error" class="error hidden">ACCESS DENIED</p>
    </div>

    <!-- DASHBOARD -->
    <div id="dashboard-screen" class="screen hidden">
      <h1>System Metrics</h1>

      <div class="metrics">
        <div class="metric">
          <span class="label">Total Visitors</span>
          <span id="total-visitors" class="value">Loading ...</span>
        </div>

        <div class="metric">
          <span class="label">Phrase Tokens Generated</span>
          <span id="phrases-generated" class="value">Loading ...</span>
        </div>

        <div class="metric">
          <span class="label">Questions Asked</span>
          <span id="questions-asked" class="value">Loading ...</span>
        </div>

        <div class="metric">
          <span class="label">Phrase Submissions</span>
          <span id="phrase-submissions" class="value">Loading ...</span>
        </div>

        <div class="metric">
          <span class="label">Identities Issued</span>
          <span id="identities-issued" class="value">Loading ...</span>
        </div>

        <div class="metric">
          <span class="label">Failures</span>
          <span id="failures" class="value">Loading ...</span>
        </div>

        <div class="metric">
          <span class="label">Transfer Claims</span>
          <span id="transfer-claims" class="value">Loading ...</span>
        </div>
      </div>

      <div class="system-config">
        <h1 style="text-align: center; margin-bottom: -20px;">System Configuration</h1>
        <div id="config-container" class="config-container"></div>
        <button
          id="reset-demo-button"
          style="
            background-color: rgba(255, 0, 0, 0.262);
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
          "
        >
          Reset Demo
        </button>
      </div>

      <!-- Feedback -->
      <div class="feedback-section">
        <h1 style="text-align: center; width: 100%; margin-top: 50px;">Users Feedback</h1>
        <div id="feedback-container"></div>
      </div>
    </div>

    <script src="./js/dashboard/dashboard.js" type="module"></script>
    <script type="module">
      import {resetDemo} from "./js/dashboard/reset-demo.js"
      const resetButton = document.getElementById("reset-demo-button")

      resetButton.addEventListener("click", async () => {
        if(confirm("This operation will delete all data stored and restart everything to its default values.")){
          resetButton.textContent = "Loading ..."
          resetButton.disabled = true
          await resetDemo()
        }
      })
    </script>
  </body>
</html>
